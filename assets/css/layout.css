/* ===== Global ===== */
:root{
  --bg:#f8f9fa; --fg:#222; --muted:#555; --border:#e5e5e5; --link:#0a66c2;
  --radius:12px;
}
*{ box-sizing:border-box; }
html,body{
  margin:0; padding:0; background:var(--bg); color:var(--fg);
  font-family:system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  line-height:1.7;
}

/* ===== 容器 ===== */
.wrap{ max-width:860px; margin:3rem auto; padding:0 1.5rem; }  /* 文章页 */
.wrap.wide{ max-width:1400px; margin:3rem auto; padding:0 2rem; } /* 首页 */
@media (max-width: 640px){ .wrap, .wrap.wide{ margin:2rem auto; padding:0 1rem; } }

h1,h2,h3{ line-height:1.25; margin:2rem 0 1rem; }
p{ margin:0 0 1rem; }
a{ color:var(--link); text-decoration:none; }
a:hover{ text-decoration:underline; }



/* ===== 全屏横幅 Welcome ===== */
.home-hero{
  position:relative;
  width:100vw;
  height:480px;
  margin-left:calc(50% - 50vw); /* 拉到屏幕两边 */
  margin-right:calc(50% - 50vw);
  overflow:hidden;
  background:center/cover no-repeat #ccc;
}
.home-hero__overlay{
  position:absolute; inset:0;
  background:linear-gradient(180deg, rgba(0,0,0,.35), rgba(0,0,0,.55));
}
.home-hero__text{
  position:absolute; inset:0;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  color:#fff; text-align:center;
  padding:0 1rem;
}
.home-hero__text h1{
  margin:0 0 .4rem; font-size:clamp(32px,5vw,56px);
  font-weight:800; text-shadow:0 3px 8px rgba(0,0,0,.4);
}
.home-hero__text p{
  margin:0; font-size:clamp(16px,2vw,22px); opacity:.92;
}

/* ===== 文章卡片区（居中两列） ===== */
.post-cards{
  display:grid;
  grid-template-columns: 1fr;
  gap: 30px;
  margin-top: 2.5rem;
  max-width:1200px;
  margin-left:auto; margin-right:auto; /* 整体居中 */
}

@media (min-width: 1024px){
  .post-cards{
    grid-template-columns: repeat(2, minmax(580px, 1fr));
    justify-content:center;
  }
}

.post-card{
  background:#fff;
  border:1px solid var(--border);
  border-radius:var(--radius);
  overflow:hidden;
  box-shadow:0 4px 14px rgba(0,0,0,.06);
  transition:transform .2s ease, box-shadow .2s ease;
}
.post-card:hover{
  transform:translateY(-3px);
  box-shadow:0 10px 30px rgba(0,0,0,.1);
}
.post-thumb{
  width:100%; aspect-ratio:3/2; object-fit:cover; display:block; background:#f0f0f0;
}
.post-body{ padding:1.2rem 1.5rem 1.5rem; text-align:left; }
.post-title{ margin:0 0 .5rem; font-size:1.35rem; font-weight:700; color:var(--fg); }
.post-title a{ color:inherit; text-decoration:none; }
.post-title a:hover{ text-decoration:underline; }
.post-excerpt{ margin:0 0 .9rem; color:var(--muted); font-size:1rem; }
.post-readmore{ color:#9aa0a6; text-decoration:none; font-weight:500; }
.post-readmore:hover{ color:#6b7280; text-decoration:underline; }

@media (max-width: 520px){
  .post-body{ padding:1rem 1.1rem 1.2rem; }
  .post-title{ font-size:1.22rem; }
}

/* ====== Post page: full-bleed hero + centered text + grey Home link ====== */

/* 顶到页面最上方、两侧铺满（不受 .wrap 限制） */
.hero-banner{
  position: relative;
  width: 100vw;
  height: 520px;                 /* 想更高就调这里，例如 600px */
  margin-left: calc(50% - 50vw); /* 拉到屏幕两边 */
  margin-right: calc(50% - 50vw);
  margin-top: 0;
  background: center/cover no-repeat #ccc;
  overflow: hidden;
  border-bottom: 1px solid var(--border);
}

/* 60% 透明的暗色罩层 */
.hero-overlay{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,.60);   /* 0.60 = 60% 透明度 */
}

/* 标题、日期、口号都居中叠在图上 */
.hero-text{
  position: absolute;
  inset: 0;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  color: #fff;
  padding: 0 1rem;
}
.hero-title{
  margin: 0 0 .35rem;
  font-weight: 800;
  font-size: clamp(28px, 4.2vw, 44px);
  letter-spacing: .02em;
  text-shadow: 0 3px 10px rgba(0,0,0,.35);
}
.hero-sub{ margin: .1rem 0 0; opacity: .95; }
.hero-date{ margin: .25rem 0 0; opacity: .85; font-size: .98rem; }

/* 无封面时的简洁顶栏，也居中 */
.hero-plain{
  margin-left: calc(50% - 50vw);
  margin-right: calc(50% - 50vw);
  padding: 2rem 0 1rem;
  border-bottom: 1px solid var(--border);
  text-align: center;
}
.post-h1{ margin: .6rem 0 .25rem; }
.post-meta{ margin: 0 0 1rem; color: #666; }

/* 文章正文保持居中（由 .wrap 控制宽度），可选再收紧一点 */
.post{ max-width: 860px; margin: 0 auto; }

/* ===== Blockquote style for quotes in articles ===== */
.post-body blockquote {
  border-left: 4px solid #ccc;
  background: #f9f9f9;
  padding: 0.8em 1.2em;
  color: #555;
  font-style: italic;
  margin: 1.5em 0;
  border-radius: 6px;
}

.post-body blockquote p {
  margin: 0.3em 0;
}

.comments h2 {
  text-align: center;      /* ✅ 水平居中 */
  font-weight: 600;
  font-size: 1.2rem;
  color: #444;
  margin-bottom: 1.5rem;
}

.comments {
  margin-top: 3rem;
  border-top: 1px solid #e5e5e5;
  padding-top: 1.5rem;
  text-align: center;      /* 整体居中 */
}

/* Archive page */
.page-archive h2 { margin: 1.2rem 0 .6rem; }
.page-archive ul { list-style: none; padding-left: 0; }
.page-archive li { margin: .3rem 0; }


/* ===== 固定在左上角的迷你导航（滚动不消失） ===== */
:root{ --safe-top: max(10px, env(safe-area-inset-top)); } /* 适配 iOS 刘海 */

.top-nav.mini{
  position: fixed;              /* ✅ 固定 */
  top: var(--safe-top);         /* 顶部安全间距 */
  left: 14px;                   /* 靠左 */
  z-index: 9999;                /* 永远在最上层 */
  background: transparent;      /* 只显示小胶囊本身 */
  border: 0;
  pointer-events: none;         /* 让容器不挡住底下内容的点击 */
}

.nav-mini{
  display: inline-flex;
  gap: 8px;
  pointer-events: auto;         /* 只有按钮可点 */
}

.nav-chip{
  display: inline-flex;
  align-items: center;
  padding: 6px 10px;            /* 窄窄的胶囊 */
  font: 500 14px/1.2 system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  color: #555;
  text-decoration: none;
  border: 1px solid #d7d7d7;
  border-radius: 999px;
  background: rgba(255,255,255,.78);
  backdrop-filter: blur(8px);
  box-shadow: 0 2px 10px rgba(0,0,0,.06);
}

.nav-chip:hover{
  color: #222;
  border-color: #c9c9c9;
  background: rgba(255,255,255,.92);
}

@media (max-width: 640px){
  .top-nav.mini{ left: 8px; }
  .nav-chip{ padding:5px 9px; font-size:13px; }
}


/* === Floating TOC bubble – final === */

/* --- TOC：展开态（与你现有保持一致，可微调宽度） --- */
.toc-bubble{
  position: fixed;
  z-index: 1000;
  width: 220px;                     /* 展开时宽度 */
  padding: 10px 12px;
  background: rgba(255,255,255,.85);
  backdrop-filter: blur(8px);
  border: 1px solid #ddd;
  border-radius: 16px;
  box-shadow: 0 10px 30px rgba(0,0,0,.12);
  transition: width .18s ease, height .18s ease, border-radius .18s ease, box-shadow .18s ease, opacity .18s ease;
}

/* 列表默认隐藏；展开(open)时显示 */
.toc-bubble .toc-list{ display:none; margin-top:6px; padding:4px 0; overflow:auto; }
.toc-bubble.open .toc-list{ display:block; }

/* 收起态：小圆点 */
.toc-bubble.collapsed{
  width: 44px;
  height: 44px;
  padding: 8px;
  border-radius: 9999px;            /* 圆形 */
  box-shadow: 0 6px 20px rgba(0,0,0,.10);
}

/* 收起态时只显示图标，隐藏文字与列表 */
.toc-bubble.collapsed .toc-label{ display:none; }
.toc-bubble.collapsed .toc-list{ display:none !important; }

/* 按钮布局 */
.toc-toggle{
  display:flex; align-items:center; gap:8px;
  width:100%; background:transparent; border:0; cursor:pointer;
  font-weight:700; color:#444;
}

/* 列表项（沿用你原样式） */
.toc-item{ display:block; padding:4px 6px; border-radius:8px; color:#333; text-decoration:none; font-size:.92rem; line-height:1.35; }
.toc-item.lv2{ padding-left:14px; opacity:.9; }
.toc-item:hover{ background:#f2f2f2; }
.toc-item.active{ background:#e9eef6; color:#1f3b77; }

.toc-list::-webkit-scrollbar{ width:6px; }
.toc-list::-webkit-scrollbar-thumb{ background:#d0d0d0; border-radius:8px; }

/* 小屏隐藏（按需） */
@media (max-width:900px){ .toc-bubble{ display:none; } }

/* ===== Archive timeline ===== */
.timeline{
  position: relative;
  margin: 0 0 2.4rem 1.75rem;  /* 左边给竖线让位 */
  padding: 0;
  list-style: none;
}
.timeline::before{
  content: "";
  position: absolute;
  left: 0; top: 0; bottom: 0;
  width: 2px;
  background: #e5e7eb;         /* 时间线竖线 */
}

.tl-item{
  position: relative;
  display: flex;
  align-items: baseline;
  gap: 1rem;
  padding-left: 1.25rem;        /* 节点点到内容的距离 */
  margin: .55rem 0 .9rem;
}
.tl-item::before{
  content: "";
  position: absolute;
  left: -5px;                   /* 小圆点居中在线上 */
  top: .9rem;
  width: 10px; height: 10px;
  background: #fff;
  border: 2px solid #9ca3af;    /* 小圆点描边 */
  border-radius: 9999px;
  box-shadow: 0 0 0 3px rgba(156,163,175,.15);
}

.tl-year{
  margin: 2rem 0 1rem;
  font-size: 1.8rem;
  font-weight: 800;
}

.tl-date{
  width: 76px;
  text-align: right;
  color: #6b7280;
  font-variant-numeric: tabular-nums; /* 等宽数字，更整齐 */
}
.tl-date .d{ font-weight: 700; }
.tl-date .m{ opacity: .9; }

.tl-link{
  color: var(--link);
  text-decoration: none;
}
.tl-link:hover{ text-decoration: underline; }

/* 小屏收紧 */
@media (max-width: 640px){
  .timeline{ margin-left: 1.2rem; }
  .tl-date{ width: 64px; }
}